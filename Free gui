local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

if not Rayfield then
    warn("Failed to load Rayfield library")
    return
end

local Window = Rayfield:CreateWindow({
    Name = "Vision Hub",
    LoadingTitle = "Vision Script",
    LoadingSubtitle = "by Vision",
    ConfigurationSaving = {
       Enabled = false,
       FileName = "Vision Script Hub"
    },
    Discord = {
       Enabled = true,
       Invite = "GYH92be25Z",
       RememberJoins = true
    },
    KeySystem = true,
    KeySettings = {
       Title = "Vision Script Hub| Key",
       Subtitle = "Link In Discord Server",
       Note = "Join Server From Misc Tab",
       FileName = "BladeBallKey",
       SaveKey = false,
       GrabKeyFromSite = true,
       Key = {"https://pastebin.com/raw/QZYyHa0H"}
    }
})

if not Window then
    warn("Failed to create window. Please check the Rayfield library or script parameters.")
    return
end

-- =============================
-- THROWING TAB
-- =============================
local ThrowingTab = Window:CreateTab("Throwing", nil)
local QBAimbotSection = ThrowingTab:CreateSection("QBAimbot")

local qbToggle = ThrowingTab:CreateToggle({
    Name = "QB Aimbot",
    CurrentValue = false,
    Flag = "QB_Toggle",
    Callback = function(Value)
        if Value then
            loadstring(game:HttpGet("https://raw.githubusercontent.com/kosta5630/Arcade-basketball-public/refs/heads/main/Auto%20perfect"))()
        end
    end,
})

-- =============================
-- CATCHING TAB
-- =============================
local CatchingTab = Window:CreateTab("Catching", nil)
local CatchSection = CatchingTab:CreateSection("Catching")

-- Magnet Toggle
local magnetToggle = CatchingTab:CreateToggle({
    Name = "Magnet",
    CurrentValue = false,
    Flag = "Magnet_Toggle",
    Callback = function(Value)
        _G.reachEnabled = Value
    end,
})

-- Magnet Distance Slider
local magnetSlider = CatchingTab:CreateSlider({
    Name = "Magnet Distance",
    Range = {1, 30},
    Increment = 1,
    Suffix = " studs",
    CurrentValue = 15,
    Flag = "Magnet_Distance",
    Callback = function(Value)
        _G.reach = Value
    end,
})

-- Magnet Script
spawn(function()
    local rs = game:GetService("RunService")
    local plr = game.Players.LocalPlayer
    _G.reach = _G.reach or 15

    for _, v in pairs(workspace:GetDescendants()) do
        if v:IsA("Seat") then v.Disabled = true end
    end

    while true do
        if _G.reachEnabled and plr.Character and plr.Character:FindFirstChild("CatchRight") and plr.Character:FindFirstChild("CatchLeft") then
            local cl, cr = plr.Character.CatchLeft, plr.Character.CatchRight

            for _, v in pairs(workspace:GetChildren()) do
                if v.Name == "Football" then
                    local dist = (plr.Character.HumanoidRootPart.Position - v.Position).Magnitude
                    if dist <= _G.reach then
                        firetouchinterest(cl, v, 0)
                        firetouchinterest(cr, v, 0)
                        task.wait()
                        firetouchinterest(cl, v, 1)
                        firetouchinterest(cr, v, 1)
                    end
                end
            end

            if cl.Size ~= Vector3.new(_G.reach, _G.reach, _G.reach) then
                cl.Size = Vector3.new(_G.reach, _G.reach, _G.reach)
            end
            if cr.Size ~= Vector3.new(_G.reach, _G.reach, _G.reach) then
                cr.Size = Vector3.new(_G.reach, _G.reach, _G.reach)
            end
        end
        rs.Stepped:Wait()
    end
end)

-- Show Magnet Hitbox
local hitboxToggle = CatchingTab:CreateToggle({
    Name = "Show Magnet Hitbox",
    CurrentValue = false,
    Flag = "Hitbox_Toggle",
    Callback = function(Value)
        _G.hitboxEnabled = Value
    end,
})

spawn(function()
    local RunService = game:GetService("RunService")
    local Workspace = game:GetService("Workspace")
    local HITBOX_SIZE = _G.reach or 15
    local hitboxes = {}

    local function createHitbox(ball)
        if hitboxes[ball] then return end
        local hitbox = Instance.new("Part")
        hitbox.Name = "VisualizerHitbox"
        hitbox.Shape = Enum.PartType.Ball
        hitbox.Size = Vector3.new(HITBOX_SIZE,HITBOX_SIZE,HITBOX_SIZE)
        hitbox.Material = Enum.Material.ForceField
        hitbox.Color = Color3.fromRGB(0,0,255)
        hitbox.Transparency = 0.4
        hitbox.Anchored = true
        hitbox.CanCollide = false
        hitbox.Parent = Workspace
        hitboxes[ball] = hitbox

        local connection
        connection = RunService.Heartbeat:Connect(function()
            if not ball or not ball.Parent then
                hitbox:Destroy()
                hitboxes[ball] = nil
                connection:Disconnect()
                return
            end
            hitbox.CFrame = ball.CFrame
        end)
    end

    RunService.Heartbeat:Connect(function()
        if _G.hitboxEnabled then
            for _, obj in pairs(Workspace:GetChildren()) do
                if obj:IsA("BasePart") and obj.Name:lower():find("football") and not obj.Anchored then
                    createHitbox(obj)
                end
            end
        end
    end)
end)

-- Pull Vector Toggle
local pullToggle = CatchingTab:CreateToggle({
    Name = "Pull Vector",
    CurrentValue = false,
    Flag = "Pull_Toggle",
    Callback = function(Value)
        _G.pullEnabled = Value
    end,
})

local pullDistanceSlider = CatchingTab:CreateSlider({
    Name = "Pull Vector Distance",
    Range = {1, 30},
    Increment = 1,
    CurrentValue = 20,
    Flag = "Pull_Distance",
    Callback = function(Value)
        _G.pullDistance = Value
    end,
})

local pullPowerSlider = CatchingTab:CreateSlider({
    Name = "Pull Vector Power",
    Range = {1, 30},
    Increment = 1,
    CurrentValue = 20,
    Flag = "Pull_Power",
    Callback = function(Value)
        _G.pullPower = Value
    end,
})

spawn(function()
    local Players = game:GetService("Players")
    local RunService = game:GetService("RunService")
    local Workspace = game:GetService("Workspace")
    local player = Players.LocalPlayer

    while true do
        if _G.pullEnabled and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local hrp = player.Character.HumanoidRootPart
            local closest, dist = nil, math.huge

            for _, obj in pairs(Workspace:GetChildren()) do
                if obj:IsA("BasePart") and obj.Name:lower():find("football") and not obj.Anchored then
                    local d = (hrp.Position - obj.Position).Magnitude
                    if d < dist and d <= (_G.pullDistance or 20) then
                        closest = obj
                        dist = d
                    end
                end
            end

            if closest then
                closest.CFrame = hrp.CFrame + Vector3.new(0, (_G.pullPower or 2), 0)
            end
        end
        RunService.Heartbeat:Wait()
    end
end)

-- Auto Freeze Tech Toggle
local freezeToggle = CatchingTab:CreateToggle({
    Name = "Auto Freeze Tech",
    CurrentValue = false,
    Flag = "Freeze_Toggle",
    Callback = function(Value)
        _G.freezeEnabled = Value
    end,
})

local freezeSlider = CatchingTab:CreateSlider({
    Name = "Freeze Duration",
    Range = {0.0,2.0},
    Increment = 0.1,
    CurrentValue = 0.6,
    Flag = "Freeze_Duration",
    Callback = function(Value)
        _G.freezeDuration = Value
    end,
})

spawn(function()
    local Players = game:GetService("Players")
    local RunService = game:GetService("RunService")
    local Workspace = game:GetService("Workspace")
    local player = Players.LocalPlayer
    local freezing = false

    while true do
        if _G.freezeEnabled and not freezing and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local hrp = player.Character.HumanoidRootPart
            local closest, dist = nil, math.huge

            for _, obj in pairs(Workspace:GetChildren()) do
                if obj:IsA("BasePart") and obj.Name:lower():find("football") and not obj.Anchored then
                    local d = (hrp.Position - obj.Position).Magnitude
                    if d < dist and d <= 5 then
                        closest = obj
                        dist = d
                    end
                end
            end

            if closest then
                freezing = true
                local oldVel = hrp.AssemblyLinearVelocity
                hrp.Anchored = true
                task.delay(_G.freezeDuration or 0.6, function()
                    if hrp then
                        hrp.Anchored = false
                        hrp.AssemblyLinearVelocity = oldVel
                    end
                    freezing = false
                end)
            end
        end
        RunService.Heartbeat:Wait()
    end
end)

-- =============================
-- PLAYER TAB
-- =============================
local PlayerTab = Window:CreateTab("Player", nil)
local PlayerSection = PlayerTab:CreateSection("Player")

-- Walkspeed Toggle
local walkToggle = PlayerTab:CreateToggle({
    Name = "Walkspeed",
    CurrentValue = false,
    Flag = "Walk_Toggle",
    Callback = function(Value)
        _G.walkEnabled = Value
    end,
})

local walkSlider = PlayerTab:CreateSlider({
    Name = "Walkspeed Amount",
    Range = {0.0,2.5},
    Increment = 0.05,
    CurrentValue = 2.2,
    Flag = "Walk_Amount",
    Callback = function(Value)
        _G.walkSpeedAmount = Value
    end,
})

-- Jump Power Toggle
local jumpToggle = PlayerTab:CreateToggle({
    Name = "Jump Power",
    CurrentValue = false,
    Flag = "Jump_Toggle",
    Callback = function(Value)
        _G.jumpEnabled = Value
    end,
})

local jumpSlider = PlayerTab:CreateSlider({
    Name = "Jump Power Amount",
    Range = {50,80},
    Increment = 1,
    CurrentValue = 75,
    Flag = "Jump_Amount",
    Callback = function(Value)
        _G.jumpPowerAmount = Value
    end,
})

-- Angle Enhancer Toggle
local angleToggle = PlayerTab:CreateToggle({
    Name = "Angle Enhancer",
    CurrentValue = true,
    Flag = "Angle_Toggle",
    Callback = function(Value)
        getgenv().AngleEnhancer = Value
    end,
})

local angleSlider = PlayerTab:CreateSlider({
    Name = "Angle Boost Power",
    Range = {50,80},
    Increment = 1,
    CurrentValue = 65,
    Flag = "Angle_Amount",
    Callback = function(Value)
        getgenv().BoostedJumpPower = Value
    end,
})

-- =============================
-- PHYSIC TAB
-- =============================
local PhysicTab = Window:CreateTab("Physic", nil)
local PhysicSection = PhysicTab:CreateSection("Physic")

-- Block Extender Toggle
local blockToggle = PhysicTab:CreateToggle({
    Name = "Block Extender",
    CurrentValue = true,
    Flag = "Block_Toggle",
    Callback = function(Value)
        getgenv().BlockExtender = Value
    end,
})

-- Block Range Slider
local blockSlider = PhysicTab:CreateSlider({
    Name = "Block Range Amount",
    Range = {6,20},
    Increment = 1,
    CurrentValue = 10,
    Flag = "BlockRange_Amount",
    Callback = function(Value)
        getgenv().BlockRange = Value
    end,
})
